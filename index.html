<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paragon Operations Map</title>
  <meta name="description" content="Comprehensive operational analysis and strategic planning tool for Paragon Property Management.">

  <link rel="stylesheet" href="css/style.css">

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="manifest" href="site.webmanifest">
</head>
<body>
<div class="container">
  <div class="header">
    <div>
      <h1>Paragon Operations Map</h1>
      <p>Comprehensive Operational Analysis &amp; Strategic Planning</p>
    </div>
    <div class="header-meta">
      <p><strong>Created:</strong> February 2026</p>
      <p><strong>Manager:</strong> Carlos Sanchez</p>
      <p><strong>Target Date:</strong> March 31, 2026</p>
    </div>
  </div>

  <div class="nav-tabs">
    <!-- FIX: pass `this` so switchView() receives the clicked element directly,
         avoiding reliance on window.event which is undefined in Firefox. -->
    <div class="nav-tab active" onclick="switchView('tracking', this)">&#128202; Tracking View</div>
    <div class="nav-tab" onclick="switchView('map', this)">&#128506; Map View</div>
    <div class="nav-tab" onclick="switchView('models', this)">&#127919; Strategic Models</div>
  </div>

  <div class="controls" id="controls">
    <!-- Search/filter bar â€” only shown on Tracking view -->
    <div class="filter-bar" id="filter-bar">
      <input
        type="text"
        id="search-input"
        class="search-input"
        placeholder="Search tasks..."
        oninput="applyFilter()"
        aria-label="Search tasks by keyword"
      >
      <select id="owner-filter" class="owner-select" onchange="applyFilter()" aria-label="Filter by owner">
        <option value="">All Owners</option>
      </select>
      <button class="btn btn-secondary" onclick="clearFilter()">Clear</button>
      <span id="filter-count" class="filter-count" aria-live="polite"></span>
    </div>
    <div class="legend">
      <div class="legend-item"><div class="legend-color" style="background:#ff6f00"></div><span>Nathan</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#1976d2"></div><span>Patrick</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#00897b"></div><span>Austin</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#6a1b9a"></div><span>Cathryn</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#00695c"></div><span>Linda</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#5e35b1"></div><span>Kevin</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#263238"></div><span>Jason</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#c62828"></div><span>Carlos</span></div>
      <div class="legend-item"><div class="legend-color" style="background:#d32f2f"></div><span>&#9888;&#65039; UNOWNED</span></div>
    </div>
  </div>

  <div class="content">
    <!-- TRACKING VIEW -->
    <div id="tracking-view" class="view-panel active">
      <div class="tracking-hero">
        <h2>PARAGON PROPERTY MANAGEMENT</h2>
        <p>~150 Units | Scaling to 300-500</p>
      </div>
      <div class="departments" id="departments"></div>
      <div id="no-results" class="no-results" style="display:none">
        No tasks match your search. <button class="btn-link" onclick="clearFilter()">Clear filters</button>
      </div>
    </div>

    <!-- MAP VIEW -->
    <div id="map-view" class="view-panel">
      <!-- Owner filter pills + action bar -->
      <div id="map-controls" class="map-controls"></div>
      <!-- Two-column layout: SVG map + optional task detail panel -->
      <div class="map-layout">
        <div class="map-scroll-wrapper">
          <svg id="flowMap"></svg>
        </div>
        <div id="map-dept-panel" class="map-dept-panel">
          <div class="map-panel-placeholder">
            <span>&#x1F4CB;</span>
            <p>Click a department box on the map to see its task list here.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- STRATEGIC MODELS VIEW -->
    <div id="models-view" class="view-panel">
      <h2 class="section-heading">&#127919; Strategic Execution Models for Scaling</h2>
      <div class="models-grid" id="models-container"></div>

      <h2 class="section-heading section-heading--spaced">&#128218; Industry Case Studies</h2>
      <div id="case-studies-container"></div>
    </div>
  </div>

  <div class="stats">
    <div class="stat-card"><div class="stat-label">Total Tasks</div><div class="stat-value" id="stat-total">0</div></div>
    <div class="stat-card"><div class="stat-label">Assigned</div><div class="stat-value" id="stat-assigned">0</div></div>
    <div class="stat-card danger"><div class="stat-label">&#9888; Unowned</div><div class="stat-value" id="stat-unowned">0</div></div>
    <div class="stat-card"><div class="stat-label">Departments</div><div class="stat-value" id="stat-departments">0</div></div>
  </div>
</div>

<!-- FIX: paths updated from bare filenames to js/ subdirectory,
     matching the actual file locations and making webpack entry consistent. -->
<script src="js/data.js"></script>
<script src="js/app.js"></script>
</body>
</html>
